"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@nivo/core"),t=require("@nivo/legends"),o=require("react"),n=require("react/jsx-runtime"),r=require("@nivo/tooltip"),i=require("d3-time-format"),a=require("d3-scale"),d=require("lodash/range"),l=require("lodash/memoize"),u=require("lodash/isDate"),s=require("d3-time");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function h(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var m=h(o),g=c(d),f=c(l),v=c(u);function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},y.apply(this,arguments)}function p(e,t){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}var x,b=o.memo((function(e){var t=e.years,o=e.legend,r=e.theme;return n.jsx(n.Fragment,{children:t.map((function(e){return n.jsx("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"middle",style:r.labels.text,children:o(e.year)},e.year)}))})})),S=o.memo((function(e){var t=e.path,o=e.borderWidth,r=e.borderColor;return n.jsx("path",{d:t,style:{fill:"none",strokeWidth:o,stroke:r,pointerEvents:"none"}})})),w=o.memo((function(e){var t=e.months,o=e.legend,r=e.theme;return n.jsx(n.Fragment,{children:t.map((function(e){return n.jsx("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"middle",style:r.labels.text,children:o(e.year,e.month,e.date)},e.date.toString()+".legend")}))})})),C=o.memo((function(e){var t=e.data,i=e.x,a=e.y,d=e.size,l=e.color,u=e.borderWidth,s=e.borderColor,c=e.isInteractive,h=e.tooltip,g=e.onMouseEnter,f=e.onMouseMove,v=e.onMouseLeave,p=e.onClick,x=e.formatValue,b=r.useTooltip(),S=b.showTooltipFromEvent,w=b.hideTooltip,C=o.useCallback((function(e){if("value"in t){var o=y({},t,{value:x(t.value),data:y({},t.data)});S(m.createElement(h,y({},o)),e),null==g||g(t,e)}}),[S,h,t,g,x]),W=o.useCallback((function(e){if("value"in t){var o=y({},t,{value:x(t.value),data:y({},t.data)});S(m.createElement(h,y({},o)),e),f&&f(t,e)}}),[S,h,t,f,x]),L=o.useCallback((function(e){"value"in t&&(w(),null==v||v(t,e))}),[w,t,v]),M=o.useCallback((function(e){return null==p?void 0:p(t,e)}),[t,p]);return n.jsx("rect",{x:i,y:a,width:d,height:d,style:{fill:l,strokeWidth:u,stroke:s},onMouseEnter:c?C:void 0,onMouseMove:c?W:void 0,onMouseLeave:c?L:void 0,onClick:c?M:void 0})})),W=o.memo((function(e){var t=e.value,o=e.day,i=e.color;return void 0===t||isNaN(Number(t))?null:n.jsx(r.BasicTooltip,{id:o,value:t,color:i,enableChip:!0})})),L=i.timeFormat("%b"),M={colors:["#61cdbb","#97e3d5","#e8c1a0","#f47560"],align:"center",direction:"horizontal",emptyColor:"#fff",minValue:0,maxValue:"auto",yearSpacing:30,yearLegend:function(e){return e},yearLegendPosition:"before",yearLegendOffset:10,monthBorderWidth:2,monthBorderColor:"#000",monthSpacing:0,monthLegend:function(e,t,o){return L(o)},monthLegendPosition:"before",monthLegendOffset:10,daySpacing:0,dayBorderWidth:1,dayBorderColor:"#000",isInteractive:!0,legends:[],tooltip:W},k=y({},M,{role:"img"}),j=y({},M,{pixelRatio:"undefined"!=typeof window&&null!=(x=window.devicePixelRatio)?x:1}),D=y({},k,{dayBorderColor:"#fff",dayRadius:0,square:!0,weekdayLegendOffset:75}),V=function(e,t,o){var n=e.map((function(e){return e.value}));return["auto"===t?Math.min.apply(Math,n):t,"auto"===o?Math.max.apply(Math,n):o]},O=f.default((function(e){var t,o=e.date,n=e.cellSize,r=e.yearIndex,i=e.yearSpacing,a=e.monthSpacing,d=e.daySpacing,l=e.direction,u=e.originX,c=e.originY,h=new Date(o.getFullYear(),o.getMonth()+1,0),m=s.timeWeek.count(s.timeYear(o),o),g=s.timeWeek.count(s.timeYear(h),h),f=o.getDay(),v=h.getDay(),y=u,p=c,x=r*(7*(n+d)+i),b=o.getMonth()*a;"horizontal"===l?(p+=x,y+=b):(p+=b,y+=x);var S={x:y,y:p,width:0,height:0};return"horizontal"===l?(t=["M"+(y+(m+1)*(n+d))+","+(p+f*(n+d)),"H"+(y+m*(n+d))+"V"+(p+7*(n+d)),"H"+(y+g*(n+d))+"V"+(p+(v+1)*(n+d)),"H"+(y+(g+1)*(n+d))+"V"+p,"H"+(y+(m+1)*(n+d))+"Z"].join(""),S.x=y+m*(n+d),S.width=y+(g+1)*(n+d)-S.x,S.height=7*(n+d)):(t=["M"+(y+f*(n+d))+","+(p+(m+1)*(n+d)),"H"+y+"V"+(p+(g+1)*(n+d)),"H"+(y+(v+1)*(n+d))+"V"+(p+g*(n+d)),"H"+(y+7*(n+d))+"V"+(p+m*(n+d)),"H"+(y+f*(n+d))+"Z"].join(""),S.y=p+m*(n+d),S.width=7*(n+d),S.height=p+(g+1)*(n+d)-S.y),{path:t,bbox:S}}),(function(e){var t=e.date,o=e.cellSize,n=e.yearIndex,r=e.yearSpacing,i=e.monthSpacing,a=e.daySpacing,d=e.direction,l=e.originX,u=e.originY;return t.toString()+"."+o+"."+n+"."+r+"."+i+"."+a+"."+d+"."+l+"."+u})),z=i.timeFormat("%Y-%m-%d"),P=function(t){var o,n=t.width,r=t.height,i=t.from,a=t.to,d=t.direction,l=t.yearSpacing,u=t.monthSpacing,c=t.daySpacing,h=t.align,m=v.default(i)?i:new Date(i),f=v.default(a)?a:new Date(a),p=g.default(m.getFullYear(),f.getFullYear()+1),x=Math.max.apply(Math,p.map((function(e){return s.timeWeeks(new Date(e,0,1),new Date(e+1,0,1)).length})))+1,b=function(e){var t,o,n=e.width,r=e.height,i=e.direction,a=e.yearRange,d=e.yearSpacing,l=e.monthSpacing,u=e.daySpacing,s=e.maxWeeks;return"horizontal"===i?(t=(n-12*l-u*s)/s,o=(r-(a.length-1)*d-a.length*(8*u))/(7*a.length)):(t=(n-(a.length-1)*d-a.length*(8*u))/(7*a.length),o=(r-12*l-u*s)/s),Math.min(t,o)}({width:n,height:r,direction:d,yearRange:p,yearSpacing:l,monthSpacing:u,daySpacing:c,maxWeeks:x}),S=b*x+c*x+12*u,w=7*(b+c)*p.length+l*(p.length-1),C="horizontal"===d?S:w,W="horizontal"===d?w:S,L=e.alignBox({x:0,y:0,width:C,height:W},{x:0,y:0,width:n,height:r},h),M=L[0],k=L[1];o="horizontal"===d?function(e,t,o,n){return function(r,i,a,d){return{x:r+s.timeWeek.count(s.timeYear(a),a)*(e+n)+n/2+a.getMonth()*o,y:i+a.getDay()*(e+n)+n/2+d*(t+7*(e+n))}}}(b,l,u,c):function(e,t,o,n){return function(r,i,a,d){var l=s.timeWeek.count(s.timeYear(a),a);return{x:r+a.getDay()*(e+n)+n/2+d*(t+7*(e+n)),y:i+l*(e+n)+n/2+a.getMonth()*o}}}(b,l,u,c);var j=[],D=[],V=[];return p.forEach((function(e,t){var n=new Date(e,0,1),r=new Date(e+1,0,1);V=V.concat(s.timeDays(n,r).map((function(e){return y({date:e,day:z(e),size:b},o(M,k,e,t))})));var i=s.timeMonths(n,r).map((function(e){return y({date:e,year:e.getFullYear(),month:e.getMonth()},O({originX:M,originY:k,date:e,direction:d,yearIndex:t,yearSpacing:l,monthSpacing:u,daySpacing:c,cellSize:b}))}));D=D.concat(i),j.push({year:e,bbox:{x:i[0].bbox.x,y:i[0].bbox.y,width:i[11].bbox.x-i[0].bbox.x+i[11].bbox.width,height:i[11].bbox.y-i[0].bbox.y+i[11].bbox.height}})})),{years:j,months:D,days:V,cellSize:b,calendarWidth:C,calendarHeight:W,originX:M,originY:k}},I=function(e){var t=e.days,o=e.data,n=e.colorScale,r=e.emptyColor;return t.map((function(e){var t=o.find((function(t){return t.day===e.day}));return y({},e,t?{color:n(t.value),data:t,value:t.value}:{color:r})}))},F=function(e){var t=e.years,o=e.direction,n=e.position,r=e.offset;return t.map((function(e){var t=0,i=0,a=0;return"horizontal"===o&&"before"===n?(t=e.bbox.x-r,i=e.bbox.y+e.bbox.height/2,a=-90):"horizontal"===o&&"after"===n?(t=e.bbox.x+e.bbox.width+r,i=e.bbox.y+e.bbox.height/2,a=-90):"vertical"===o&&"before"===n?(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y-r):(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y+e.bbox.height+r),y({},e,{x:t,y:i,rotation:a})}))},B=function(e){var t=e.months,o=e.direction,n=e.position,r=e.offset;return t.map((function(e){var t=0,i=0,a=0;return"horizontal"===o&&"before"===n?(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y-r):"horizontal"===o&&"after"===n?(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y+e.bbox.height+r):"vertical"===o&&"before"===n?(t=e.bbox.x-r,i=e.bbox.y+e.bbox.height/2,a=-90):(t=e.bbox.x+e.bbox.width+r,i=e.bbox.y+e.bbox.height/2,a=-90),y({},e,{x:t,y:i,rotation:a})}))},E=function(e){var t=e.width,n=e.height,r=e.from,i=e.to,a=e.direction,d=e.yearSpacing,l=e.monthSpacing,u=e.daySpacing,s=e.align;return o.useMemo((function(){return P({width:t,height:n,from:r,to:i,direction:a,yearSpacing:d,monthSpacing:l,daySpacing:u,align:s})}),[t,n,r,i,a,d,l,u,s])},H=function(e){var t=e.data,n=e.minValue,r=e.maxValue,i=e.colors,d=e.colorScale;return o.useMemo((function(){if(d)return d;var e=V(t,n,r);return a.scaleQuantize().domain(e).range(i)}),[t,n,r,i,d])},R=function(e){var t=e.years,n=e.direction,r=e.yearLegendPosition,i=e.yearLegendOffset;return o.useMemo((function(){return F({years:t,direction:n,position:r,offset:i})}),[t,n,r,i])},T=function(e){var t=e.months,n=e.direction,r=e.monthLegendPosition,i=e.monthLegendOffset;return o.useMemo((function(){return B({months:t,direction:n,position:r,offset:i})}),[t,n,r,i])},Y=function(e){var t=e.days,n=e.data,r=e.colorScale,i=e.emptyColor;return o.useMemo((function(){return I({days:t,data:n,colorScale:r,emptyColor:i})}),[t,n,r,i])},q=["months","years"],A=["isInteractive","renderWrapper","theme"],X=function(o){var r=o.margin,i=o.width,a=o.height,d=o.align,l=void 0===d?k.align:d,u=o.colors,s=void 0===u?k.colors:u,c=o.colorScale,h=o.data,m=o.direction,g=void 0===m?k.direction:m,f=o.emptyColor,v=void 0===f?k.emptyColor:f,x=o.from,W=o.to,L=o.minValue,M=void 0===L?k.minValue:L,j=o.maxValue,D=void 0===j?k.maxValue:j,V=o.valueFormat,O=o.legendFormat,z=o.yearLegend,P=void 0===z?k.yearLegend:z,I=o.yearLegendOffset,F=void 0===I?k.yearLegendOffset:I,B=o.yearLegendPosition,A=void 0===B?k.yearLegendPosition:B,X=o.yearSpacing,_=void 0===X?k.yearSpacing:X,N=o.monthBorderColor,Z=void 0===N?k.monthBorderColor:N,Q=o.monthBorderWidth,G=void 0===Q?k.monthBorderWidth:Q,J=o.monthLegend,K=void 0===J?k.monthLegend:J,U=o.monthLegendOffset,$=void 0===U?k.monthLegendOffset:U,ee=o.monthLegendPosition,te=void 0===ee?k.monthLegendPosition:ee,oe=o.monthSpacing,ne=void 0===oe?k.monthSpacing:oe,re=o.dayBorderColor,ie=void 0===re?k.dayBorderColor:re,ae=o.dayBorderWidth,de=void 0===ae?k.dayBorderWidth:ae,le=o.daySpacing,ue=void 0===le?k.daySpacing:le,se=o.isInteractive,ce=void 0===se?k.isInteractive:se,he=o.tooltip,me=void 0===he?k.tooltip:he,ge=o.onClick,fe=o.onMouseEnter,ve=o.onMouseLeave,ye=o.onMouseMove,pe=o.legends,xe=void 0===pe?k.legends:pe,be=o.role,Se=void 0===be?k.role:be,we=e.useTheme(),Ce=e.useDimensions(i,a,r),We=Ce.margin,Le=Ce.innerWidth,Me=Ce.innerHeight,ke=Ce.outerWidth,je=Ce.outerHeight,De=E({width:Le,height:Me,from:x,to:W,direction:g,yearSpacing:_,monthSpacing:ne,daySpacing:ue,align:l}),Ve=De.months,Oe=De.years,ze=p(De,q),Pe=H({data:h,minValue:M,maxValue:D,colors:s,colorScale:c}),Ie=T({months:Ve,direction:g,monthLegendPosition:te,monthLegendOffset:$}),Fe=R({years:Oe,direction:g,yearLegendPosition:A,yearLegendOffset:F}),Be=Y({days:ze.days,data:h,colorScale:Pe,emptyColor:v}),Ee=e.useValueFormatter(O),He=e.useValueFormatter(V);return n.jsxs(e.SvgWrapper,{width:ke,height:je,margin:We,role:Se,children:[Be.map((function(e){return n.jsx(C,{data:e,x:e.x,y:e.y,size:e.size,color:e.color,borderWidth:de,borderColor:ie,onMouseEnter:fe,onMouseLeave:ve,onMouseMove:ye,isInteractive:ce,tooltip:me,onClick:ge,formatValue:He},e.date.toString())})),Ve.map((function(e){return n.jsx(S,{path:e.path,borderWidth:G,borderColor:Z},e.date.toString())})),n.jsx(w,{months:Ie,legend:K,theme:we}),n.jsx(b,{years:Fe,legend:P,theme:we}),xe.map((function(e,o){var r=Pe.ticks(e.itemCount).map((function(e){return{id:e,label:Ee(e),color:Pe(e)}}));return n.jsx(t.BoxLegendSvg,y({},e,{containerWidth:i,containerHeight:a,data:r}),o)}))]})},_=function(t){var o=t.isInteractive,r=void 0===o?k.isInteractive:o,i=t.renderWrapper,a=t.theme,d=p(t,A);return n.jsx(e.Container,{isInteractive:r,renderWrapper:i,theme:a,children:n.jsx(X,y({isInteractive:r},d))})},N=i.timeFormat("%Y-%m-%d"),Z=function(e){var t,o,n=e.direction,r=e.daySpacing,i=e.offset,a=e.square,d=e.totalDays,l=e.width,u=e.height;"horizontal"===n?(l-=i,t=7,o=Math.ceil(d/7)):(u-=i,o=7,t=Math.ceil(d/7));var s=(u-r*(t+1))/t,c=(l-r*(o+1))/o,h=Math.min(s,c);return{columns:o,rows:t,cellHeight:a?h:s,cellWidth:a?h:c}};var Q=function(e){var t=e.direction,o=e.colorScale,n=e.emptyColor,r=e.from,i=e.to,a=e.data,d=e.cellWidth,l=e.cellHeight,u=e.daySpacing,c=e.offset,h=u,m=u;"horizontal"===t?h+=c:m+=c;var g=r||a[0].date,f=i||a[a.length-1].date,p=v.default(g)?g:new Date(g),x=v.default(f)?f:new Date(f),b=s.timeDays(p,x).map((function(e){return{date:e,day:N(e)}})).map((function(e){var r=a.find((function(t){return t.day===e.day})),i=function(e){var t=e.startDate,o=e.date,n=e.direction,r=s.timeWeek.count(t,o),i=o.getMonth(),a=o.getFullYear(),d=0,l=0;return"horizontal"===n?(d=r,l=o.getDay()):(d=o.getDay(),l=r),{currentColumn:d,year:a,currentRow:l,firstWeek:r,month:i,date:o}}({startDate:p,date:e.date,direction:t}),c=i.currentColumn,g=i.currentRow,f=i.firstWeek,v=i.year,x=i.month,b=i.date,S={x:h+u*c+d*c,y:m+u*g+l*g};return r?y({},r,{coordinates:S,firstWeek:f,month:x,year:v,date:b,color:o(r.value),width:d,height:l}):y({},e,{coordinates:S,firstWeek:f,month:x,year:v,date:b,color:n,width:d,height:l})}));return b},G=function(e){var t=e.cellHeight,o=e.cellWidth,n=e.direction,r=e.daySpacing,i=e.ticks,a=void 0===i?[1,3,5]:i,d=e.arrayOfWeekdays,l=void 0===d?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]:d,u=o+r,s=t+r;return a.map((function(e){return{value:l[e],rotation:"horizontal"===n?0:-90,y:"horizontal"===n?s*(e+1)-s/3:0,x:"horizontal"===n?0:u*(e+1)-u/3}}))},J=function(e){var t=e.direction,o=e.daySpacing,n=e.days,r=e.cellHeight,i=e.cellWidth;return n.reduce((function(e,n){if(e.weeks.length===n.firstWeek){e.weeks.push(n);var a=n.year+"-"+n.month;if(Object.keys(e.months).includes(a))"horizontal"===t?e.months[a].bbox.width=(n.firstWeek-e.months[a].firstWeek)*(i+o):e.months[a].bbox.height=(n.firstWeek-e.months[a].firstWeek)*(r+o);else{var d={x:0,y:0,width:0,height:0};"horizontal"===t?(d.x=n.coordinates.x-o,d.height=r+o,d.width=i+2*o):(d.y=n.coordinates.y-o,d.height=r+2*o,d.width=i+2*o),e.months[a]={date:n.date,bbox:d,firstWeek:n.firstWeek,month:0,year:0}}}return e}),{months:{},weeks:[]})},K=function(e){var t,o,n=e.from,r=e.to,i=e.data;return t=n?v.default(n)?n:new Date(n):i[0].date,o=n&&r?v.default(r)?r:new Date(r):i[i.length-1].date,t.getDay()+s.timeDay.count(t,o)},U=o.memo((function(e){var t=e.data,i=e.x,a=e.ry,d=void 0===a?5:a,l=e.rx,u=void 0===l?5:l,s=e.y,c=e.width,h=e.height,m=e.color,g=e.borderWidth,f=e.borderColor,v=e.isInteractive,p=e.tooltip,x=e.onMouseEnter,b=e.onMouseMove,S=e.onMouseLeave,w=e.onClick,C=e.formatValue,W=r.useTooltip(),L=W.showTooltipFromEvent,M=W.hideTooltip,k=o.useCallback((function(e){if("value"in t){var n=y({},t,{value:C(t.value)});L(o.createElement(p,y({},n)),e),null==x||x(t,e)}}),[L,p,t,x,C]),j=o.useCallback((function(e){if("value"in t){var n=y({},t,{value:C(t.value)});L(o.createElement(p,y({},n)),e),null==b||b(t,e)}}),[L,p,t,b,C]),D=o.useCallback((function(e){"value"in t&&(M(),null==S||S(t,e))}),[M,t,S]),V=o.useCallback((function(e){return null==w?void 0:w(t,e)}),[t,w]);return n.jsx("rect",{x:i,y:s,rx:u,ry:d,width:c,height:h,style:{fill:m,strokeWidth:g,stroke:f},onMouseEnter:v?k:void 0,onMouseMove:v?j:void 0,onMouseLeave:v?D:void 0,onClick:v?V:void 0})})),$=["isInteractive","renderWrapper","theme"],ee=function(r){var i=r.margin,a=r.width,d=r.height,l=r.square,u=void 0===l?D.square:l,s=r.colors,c=void 0===s?D.colors:s,h=r.colorScale,m=r.emptyColor,g=void 0===m?D.emptyColor:m,f=r.from,v=r.to,p=r.data,x=r.direction,b=void 0===x?D.direction:x,S=r.minValue,C=void 0===S?D.minValue:S,W=r.maxValue,L=void 0===W?D.maxValue:W,M=r.valueFormat,k=r.legendFormat,j=r.monthLegend,V=void 0===j?D.monthLegend:j,O=r.monthLegendOffset,z=void 0===O?D.monthLegendOffset:O,P=r.monthLegendPosition,I=void 0===P?D.monthLegendPosition:P,F=r.weekdayLegendOffset,B=void 0===F?D.weekdayLegendOffset:F,E=r.weekdayTicks,R=r.dayBorderColor,Y=void 0===R?D.dayBorderColor:R,q=r.dayBorderWidth,A=void 0===q?D.dayBorderWidth:q,X=r.daySpacing,_=void 0===X?D.daySpacing:X,N=r.dayRadius,$=void 0===N?D.dayRadius:N,ee=r.isInteractive,te=void 0===ee?D.isInteractive:ee,oe=r.tooltip,ne=void 0===oe?D.tooltip:oe,re=r.onClick,ie=r.onMouseEnter,ae=r.onMouseLeave,de=r.onMouseMove,le=r.legends,ue=void 0===le?D.legends:le,se=r.role,ce=void 0===se?D.role:se,he=e.useDimensions(a,d,i),me=he.margin,ge=he.innerWidth,fe=he.innerHeight,ve=he.outerWidth,ye=he.outerHeight,pe=o.useMemo((function(){return p.map((function(e){return y({},e,{date:new Date(e.day+"T00:00:00")})})).sort((function(e,t){return e.day.localeCompare(t.day)}))}),[p]),xe=e.useTheme(),be=H({data:pe,minValue:C,maxValue:L,colors:c,colorScale:h}),Se=K({from:f,to:v,data:pe}),we=Z({square:u,offset:B,totalDays:Se,width:ge,height:fe,daySpacing:_,direction:b}),Ce=we.cellHeight,We=we.cellWidth,Le=Q({offset:B,colorScale:be,emptyColor:g,cellHeight:Ce,cellWidth:We,from:f,to:v,data:pe,direction:b,daySpacing:_}),Me=Object.values(J({daySpacing:_,direction:b,cellHeight:Ce,cellWidth:We,days:Le}).months),ke=G({direction:b,cellHeight:Ce,cellWidth:We,daySpacing:_,ticks:E}),je=T({months:Me,direction:b,monthLegendPosition:I,monthLegendOffset:z}),De=e.useValueFormatter(M),Ve=e.useValueFormatter(k);return n.jsxs(e.SvgWrapper,{width:ve,height:ye,margin:me,role:ce,children:[ke.map((function(e){return n.jsx("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"left",style:xe.labels.text,children:e.value},e.value)})),Le.map((function(e){return n.jsx(U,{data:e,x:e.coordinates.x,rx:$,y:e.coordinates.y,ry:$,width:We,height:Ce,color:e.color,borderWidth:A,borderColor:Y,onMouseEnter:ie,onMouseLeave:ae,onMouseMove:de,isInteractive:te,tooltip:ne,onClick:re,formatValue:De},e.date.toString())})),n.jsx(w,{months:je,legend:V,theme:xe}),ue.map((function(e,o){var r=be.ticks(e.itemCount).map((function(e){return{id:e,label:Ve(e),color:be(e)}}));return n.jsx(t.BoxLegendSvg,y({},e,{containerWidth:a,containerHeight:d,data:r}),o)}))]})},te=function(t){var o=t.isInteractive,r=void 0===o?D.isInteractive:o,i=t.renderWrapper,a=t.theme,d=p(t,$);return n.jsx(e.Container,{isInteractive:r,renderWrapper:i,theme:a,children:n.jsx(ee,y({isInteractive:r},d))})},oe=["months","years"],ne=["isInteractive","renderWrapper","theme"],re=function(t,o,n,r,i,a){var d=e.getRelativeCursor(o,t),l=d[0],u=d[1];return n.find((function(t){return"value"in t&&e.isCursorInRect(t.x+a.left-i/2,t.y+a.top-i/2,r+i,r+i,l,u)}))},ie=o.memo((function(i){var a=i.margin,d=i.width,l=i.height,u=i.pixelRatio,s=void 0===u?j.pixelRatio:u,c=i.align,h=void 0===c?j.align:c,g=i.colors,f=void 0===g?j.colors:g,v=i.colorScale,x=i.data,b=i.direction,S=void 0===b?j.direction:b,w=i.emptyColor,C=void 0===w?j.emptyColor:w,W=i.from,L=i.to,M=i.minValue,k=void 0===M?j.minValue:M,D=i.maxValue,V=void 0===D?j.maxValue:D,O=i.valueFormat,z=i.legendFormat,P=i.yearLegend,I=void 0===P?j.yearLegend:P,F=i.yearLegendOffset,B=void 0===F?j.yearLegendOffset:F,q=i.yearLegendPosition,A=void 0===q?j.yearLegendPosition:q,X=i.yearSpacing,_=void 0===X?j.yearSpacing:X,N=i.monthLegend,Z=void 0===N?j.monthLegend:N,Q=i.monthLegendOffset,G=void 0===Q?j.monthLegendOffset:Q,J=i.monthLegendPosition,K=void 0===J?j.monthLegendPosition:J,U=i.monthSpacing,$=void 0===U?j.monthSpacing:U,ee=i.dayBorderColor,te=void 0===ee?j.dayBorderColor:ee,ne=i.dayBorderWidth,ie=void 0===ne?j.dayBorderWidth:ne,ae=i.daySpacing,de=void 0===ae?j.daySpacing:ae,le=i.isInteractive,ue=void 0===le?j.isInteractive:le,se=i.tooltip,ce=void 0===se?j.tooltip:se,he=i.onClick,me=i.onMouseEnter,ge=i.onMouseLeave,fe=i.onMouseMove,ve=i.legends,ye=void 0===ve?j.legends:ve,pe=o.useRef(null),xe=e.useDimensions(d,l,a),be=xe.innerWidth,Se=xe.innerHeight,we=xe.outerWidth,Ce=xe.outerHeight,We=xe.margin,Le=E({width:be,height:Se,from:W,to:L,direction:S,yearSpacing:_,monthSpacing:$,daySpacing:de,align:h}),Me=Le.months,ke=Le.years,je=p(Le,oe),De=H({data:x,minValue:k,maxValue:V,colors:f,colorScale:v}),Ve=T({months:Me,direction:S,monthLegendPosition:K,monthLegendOffset:G}),Oe=R({years:ke,direction:S,yearLegendPosition:A,yearLegendOffset:B}),ze=Y({days:je.days,data:x,colorScale:De,emptyColor:C}),Pe=o.useState(null),Ie=Pe[0],Fe=Pe[1],Be=e.useTheme(),Ee=e.useValueFormatter(O),He=e.useValueFormatter(z),Re=r.useTooltip(),Te=Re.showTooltipFromEvent,Ye=Re.hideTooltip;o.useEffect((function(){var o;if(pe.current){pe.current.width=we*s,pe.current.height=Ce*s;var n=pe.current.getContext("2d");n&&(n.scale(s,s),n.fillStyle=Be.background,n.fillRect(0,0,we,Ce),n.translate(We.left,We.top),ze.forEach((function(e){n.fillStyle=e.color,ie>0&&(n.strokeStyle=te,n.lineWidth=ie),n.beginPath(),n.rect(e.x,e.y,e.size,e.size),n.fill(),ie>0&&n.stroke()})),n.textAlign="center",n.textBaseline="middle",n.fillStyle=null!=(o=Be.labels.text.fill)?o:"",n.font=Be.labels.text.fontSize+"px "+Be.labels.text.fontFamily,Ve.forEach((function(t){n.save(),n.translate(t.x,t.y),n.rotate(e.degreesToRadians(t.rotation)),n.fillText(String(Z(t.year,t.month,t.date)),0,0),n.restore()})),Oe.forEach((function(t){n.save(),n.translate(t.x,t.y),n.rotate(e.degreesToRadians(t.rotation)),n.fillText(String(I(t.year)),0,0),n.restore()})),ye.forEach((function(e){var o=De.ticks(e.itemCount).map((function(e){return{id:e,label:He(e),color:De(e)}}));t.renderLegendToCanvas(n,y({},e,{data:o,containerWidth:be,containerHeight:Se,theme:Be}))})))}}),[pe,Se,be,we,Ce,s,We,ze,te,ie,v,I,Oe,Z,Ve,ye,Be,He,De]);var qe=o.useCallback((function(e){if(pe.current){var t=re(e,pe.current,ze,ze[0].size,ie,We);if(t){if(Fe(t),!("value"in t))return;var o=y({},t,{value:Ee(t.value),data:y({},t.data)});Te(m.createElement(ce,y({},o)),e),!Ie&&(null==me||me(t,e)),null==fe||fe(t,e),Ie&&(null==ge||ge(t,e))}else Ye(),t&&(null==ge||ge(t,e))}}),[pe,Ie,We,ze,Fe,Ee,ie,Te,Ye,me,fe,ge,ce]),Ae=o.useCallback((function(){Fe(null),Ye()}),[Fe,Ye]),Xe=o.useCallback((function(e){if(he&&pe.current){var t=re(e,pe.current,ze,ze[0].size,de,We);t&&he(t,e)}}),[pe,de,We,ze,he]);return n.jsx("canvas",{ref:pe,width:we*s,height:Ce*s,style:{width:we,height:Ce},onMouseEnter:ue?qe:void 0,onMouseMove:ue?qe:void 0,onMouseLeave:ue?Ae:void 0,onClick:ue?Xe:void 0})})),ae=function(t){var o=t.isInteractive,r=void 0===o?j.isInteractive:o,i=t.renderWrapper,a=t.theme,d=p(t,ne);return n.jsx(e.Container,{isInteractive:r,renderWrapper:i,theme:a,children:n.jsx(ie,y({isInteractive:r},d))})};exports.Calendar=_,exports.CalendarCanvas=ae,exports.ResponsiveCalendar=function(t){return n.jsx(e.ResponsiveWrapper,{children:function(e){var o=e.width,r=e.height;return n.jsx(_,y({width:o,height:r},t))}})},exports.ResponsiveCalendarCanvas=function(t){return n.jsx(e.ResponsiveWrapper,{children:function(e){var o=e.width,r=e.height;return n.jsx(ae,y({width:o,height:r},t))}})},exports.ResponsiveTimeRange=function(t){return n.jsx(e.ResponsiveWrapper,{children:function(e){var o=e.width,r=e.height;return n.jsx(te,y({width:o,height:r},t))}})},exports.TimeRange=te,exports.bindDaysData=I,exports.calendarCanvasDefaultProps=j,exports.calendarDefaultProps=k,exports.computeCellPositions=Q,exports.computeCellSize=Z,exports.computeDomain=V,exports.computeLayout=P,exports.computeMonthLegendPositions=B,exports.computeMonthLegends=J,exports.computeTotalDays=K,exports.computeWeekdays=G,exports.computeYearLegendPositions=F,exports.timeRangeDefaultProps=D,exports.useCalendarLayout=E,exports.useColorScale=H,exports.useDays=Y,exports.useMonthLegends=T,exports.useYearLegends=R;
//# sourceMappingURL=nivo-calendar.cjs.js.map
