{"ast":null,"code":"import _objectSpread from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Forum/Achievements.js\";\n\nimport React from 'react';\nimport Header from '../Header/Header.js';\nimport Title from '../Title/Title.js';\nimport Post from './Post.js';\nimport { NavLink } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport { UserAuth } from '../../context/AuthContext';\nimport { db } from \"../../firebase.js\";\nimport { collection, query, onSnapshot, doc, updateDoc, deleteDoc, QuerySnapshot, orderBy, where } from \"firebase/firestore\";\n\nvar Achievements = function Achievements() {\n  var _UserAuth = UserAuth(),\n      user = _UserAuth.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentPosts = _useState2[0],\n      setCurrentPosts = _useState2[1];\n\n  useEffect(function () {\n    var active = true;\n\n    if (active == true && user.uid != null) {\n      var q = query(collection(db, \"posts\"), orderBy('createdAt'));\n      console.log(\"Retrieving posts\");\n      var getAllPosts = onSnapshot(q, function (querySnapshot) {\n        var posts = [];\n        querySnapshot.forEach(function (doc) {\n          posts.push(_objectSpread({}, doc.data(), {\n            id: doc.id\n          }));\n          console.log(doc.data());\n        });\n        setCurrentPosts(function () {\n          return posts;\n        });\n      });\n      return function () {\n        active = false;\n      };\n    }\n  }, [user.uid]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    name: \"Forum\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link\",\n    to: \"/achievements/canvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, \"View Collaborative Canvas\")), /*#__PURE__*/React.createElement(\"button\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link\",\n    to: \"/achievements/createpost\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Create Post\")), currentPosts.map(function (post) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, post['post']);\n  }));\n};\n\nexport default Achievements;","map":{"version":3,"names":["React","Header","Title","Post","NavLink","useState","useEffect","UserAuth","db","collection","query","onSnapshot","doc","updateDoc","deleteDoc","QuerySnapshot","orderBy","where","Achievements","user","currentPosts","setCurrentPosts","active","uid","q","console","log","getAllPosts","querySnapshot","posts","forEach","push","data","id","map","post"],"sources":["/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Forum/Achievements.js"],"sourcesContent":["import React from 'react'\nimport Header from '../Header/Header.js'\nimport Title from '../Title/Title.js'\nimport Post from './Post.js'\n\nimport { NavLink } from 'react-router-dom'\nimport { useState, useEffect } from \"react\"\n\nimport { UserAuth } from '../../context/AuthContext'\n\nimport {db} from \"../../firebase.js\"\nimport {\n    collection,\n    query,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    QuerySnapshot,\n    orderBy, \n    where\n  } from \"firebase/firestore\"\n\n\nconst Achievements = () => {\n\n    const {user}  = UserAuth()\n\n    const[currentPosts, setCurrentPosts] = useState([])\n\n    useEffect(() => {\n        let active = true\n        if (active == true && user.uid != null) {\n            const q = query(collection(db, \"posts\"), orderBy('createdAt'))\n            console.log(\"Retrieving posts\")\n            const getAllPosts = onSnapshot(q, (querySnapshot) => {\n                let posts = []\n                querySnapshot.forEach((doc) => {\n                    posts.push({...doc.data(), id:doc.id})\n                    console.log(doc.data())\n                })\n                setCurrentPosts(() => posts)\n            })\n            return () => {active = false}}\n    }, [user.uid])\n        \n    return (\n        <div>\n            <Header />\n            <Title name={\"Forum\"} />\n            <button>\n                <NavLink \n                className=\"nav-link\"\n                to='/achievements/canvas'>View Collaborative Canvas</NavLink>\n            </button>\n            <button>\n                <NavLink \n                className=\"nav-link\"\n                to='/achievements/createpost'>Create Post</NavLink>\n            </button>\n            {currentPosts.map((post) => (\n                <p>{post['post']}</p>\n            ))}\n        </div>\n    )\n}\n\nexport default Achievements\n\n"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,SAASC,QAAT,QAAyB,2BAAzB;AAEA,SAAQC,EAAR,QAAiB,mBAAjB;AACA,SACIC,UADJ,EAEIC,KAFJ,EAGIC,UAHJ,EAIIC,GAJJ,EAKIC,SALJ,EAMIC,SANJ,EAOIC,aAPJ,EAQIC,OARJ,EASIC,KATJ,QAUS,oBAVT;;AAaA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;EAAA,gBAEPX,QAAQ,EAFD;EAAA,IAEhBY,IAFgB,aAEhBA,IAFgB;;EAAA,gBAIgBd,QAAQ,CAAC,EAAD,CAJxB;EAAA;EAAA,IAIjBe,YAJiB;EAAA,IAIHC,eAJG;;EAMvBf,SAAS,CAAC,YAAM;IACZ,IAAIgB,MAAM,GAAG,IAAb;;IACA,IAAIA,MAAM,IAAI,IAAV,IAAkBH,IAAI,CAACI,GAAL,IAAY,IAAlC,EAAwC;MACpC,IAAMC,CAAC,GAAGd,KAAK,CAACD,UAAU,CAACD,EAAD,EAAK,OAAL,CAAX,EAA0BQ,OAAO,CAAC,WAAD,CAAjC,CAAf;MACAS,OAAO,CAACC,GAAR,CAAY,kBAAZ;MACA,IAAMC,WAAW,GAAGhB,UAAU,CAACa,CAAD,EAAI,UAACI,aAAD,EAAmB;QACjD,IAAIC,KAAK,GAAG,EAAZ;QACAD,aAAa,CAACE,OAAd,CAAsB,UAAClB,GAAD,EAAS;UAC3BiB,KAAK,CAACE,IAAN,mBAAenB,GAAG,CAACoB,IAAJ,EAAf;YAA2BC,EAAE,EAACrB,GAAG,CAACqB;UAAlC;UACAR,OAAO,CAACC,GAAR,CAAYd,GAAG,CAACoB,IAAJ,EAAZ;QACH,CAHD;QAIAX,eAAe,CAAC;UAAA,OAAMQ,KAAN;QAAA,CAAD,CAAf;MACH,CAP6B,CAA9B;MAQA,OAAO,YAAM;QAACP,MAAM,GAAG,KAAT;MAAe,CAA7B;IAA8B;EACrC,CAdQ,EAcN,CAACH,IAAI,CAACI,GAAN,CAdM,CAAT;EAgBA,oBACI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,MAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,eAEI,oBAAC,KAAD;IAAO,IAAI,EAAE,OAAb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFJ,eAGI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,OAAD;IACA,SAAS,EAAC,UADV;IAEA,EAAE,EAAC,sBAFH;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,+BADJ,CAHJ,eAQI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,OAAD;IACA,SAAS,EAAC,UADV;IAEA,EAAE,EAAC,0BAFH;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iBADJ,CARJ,EAaKH,YAAY,CAACc,GAAb,CAAiB,UAACC,IAAD;IAAA,oBACd;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAIA,IAAI,CAAC,MAAD,CAAR,CADc;EAAA,CAAjB,CAbL,CADJ;AAmBH,CAzCD;;AA2CA,eAAejB,YAAf"},"metadata":{},"sourceType":"module"}