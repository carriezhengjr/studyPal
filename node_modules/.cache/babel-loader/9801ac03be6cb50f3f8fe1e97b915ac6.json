{"ast":null,"code":"import _objectSpread from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/TaskTracker/Todolist.js\";\n\nimport Title from '../Title/Title.js';\nimport AddTodo from './AddTodo.js';\nimport Todoitem from './Todoitem.js';\nimport CalendarScheduler from './CalendarScheduler';\nimport Header from '../Header/Header.js';\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport './Todolist.css';\nimport { UserAuth } from '../../context/AuthContext';\nimport { db } from \"../../firebase.js\";\nimport { collection, query, onSnapshot, doc, updateDoc, deleteDoc, QuerySnapshot, orderBy, where } from \"firebase/firestore\";\n\nvar Todolist = function Todolist() {\n  var _UserAuth = UserAuth(),\n      user = _UserAuth.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentTasks = _useState2[0],\n      setCurrentTasks = _useState2[1];\n\n  useEffect(function () {\n    var active = true;\n\n    if (active == true && user.uid != null) {\n      var q = query(collection(db, \"todos\"), where(\"uid\", \"==\", user.uid), orderBy('createdAt'));\n      console.log(\"Retrieving task list\");\n      var getAllTasks = onSnapshot(q, function (querySnapshot) {\n        var tasks = [];\n        querySnapshot.forEach(function (doc) {\n          tasks.push(_objectSpread({}, doc.data(), {\n            id: doc.id\n          }));\n          console.log(doc.data());\n        });\n        setCurrentTasks(function () {\n          return tasks;\n        });\n        console.log(currentTasks);\n      });\n      return function () {\n        active = false;\n      };\n    }\n  }, [user.uid]);\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      events = _useState4[0],\n      setEvent = _useState4[1];\n\n  var normalizeDateTimeField = function normalizeDateTimeField(events) {\n    //const { user } = UserAuth()\n    for (var i = 0; i < events.length; i++) {\n      var title = events[i]['title'];\n      var id = events[i]['id'];\n      var start = new Date(events[i]['start']['seconds'] * 1000);\n      var end = new Date(events[i]['end']['seconds'] * 1000);\n      var newEvent = {\n        title: title,\n        start: start,\n        end: end,\n        uid: user.uid\n      };\n      events[i] = newEvent;\n    }\n\n    return events;\n  };\n\n  useEffect(function (e) {\n    var active = true;\n\n    if (active == true && user.uid != null) {\n      var q = query(collection(db, \"calendar\"), where(\"uid\", \"==\", user.uid));\n      console.log(\"Retrieving events\");\n      var getAllTasks = onSnapshot(q, function (querySnapshot) {\n        var currentEvents = [];\n        querySnapshot.forEach(function (doc) {\n          currentEvents.push(_objectSpread({}, doc.data(), {\n            id: doc.id\n          }));\n        });\n        setEvent(function () {\n          return normalizeDateTimeField(currentEvents);\n        });\n      });\n      return function () {\n        active = false;\n      };\n    }\n  }, [user.uid]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"todo-list-main\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Title, {\n    name: \"Task Tracker\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"todo-list-calender\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"todo-list-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AddTodo, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), currentTasks.map(function (todo) {\n    return /*#__PURE__*/React.createElement(Todoitem, {\n      item: todo,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"calendar-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CalendarScheduler, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Todolist;","map":{"version":3,"names":["Title","AddTodo","Todoitem","CalendarScheduler","Header","React","useState","useEffect","UserAuth","db","collection","query","onSnapshot","doc","updateDoc","deleteDoc","QuerySnapshot","orderBy","where","Todolist","user","currentTasks","setCurrentTasks","active","uid","q","console","log","getAllTasks","querySnapshot","tasks","forEach","push","data","id","events","setEvent","normalizeDateTimeField","i","length","title","start","Date","end","newEvent","e","currentEvents","map","todo"],"sources":["/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/TaskTracker/Todolist.js"],"sourcesContent":["import Title from '../Title/Title.js'\nimport AddTodo from './AddTodo.js'\nimport Todoitem from './Todoitem.js'\nimport CalendarScheduler from './CalendarScheduler'\nimport Header from '../Header/Header.js'\n\nimport React from \"react\"\nimport { useState, useEffect } from \"react\"\n\nimport './Todolist.css'\n\nimport { UserAuth } from '../../context/AuthContext'\n\n\nimport {db} from \"../../firebase.js\"\nimport {\n    collection,\n    query,\n    onSnapshot,\n    doc,\n    updateDoc,\n    deleteDoc,\n    QuerySnapshot,\n    orderBy, \n    where\n  } from \"firebase/firestore\"\n\nconst Todolist =  () => {\n\n  const {user}  = UserAuth()\n\n  const [currentTasks, setCurrentTasks] = useState([])\n  useEffect(() => {\n    let active = true\n    if (active == true && user.uid != null) {\n      const q = query(collection(db, \"todos\"), where (\"uid\", \"==\", user.uid), orderBy('createdAt'))\n      console.log(\"Retrieving task list\")\n      const getAllTasks = onSnapshot(q, (querySnapshot) => {\n      let tasks = []\n      querySnapshot.forEach((doc) => {\n        tasks.push({...doc.data(), id:doc.id})\n        console.log(doc.data())\n      })\n      setCurrentTasks(() => tasks)\n      console.log(currentTasks)\n\n    })\n    return () => {active = false}}\n  },[user.uid])\n\n  const[events, setEvent] = useState([])\n  const normalizeDateTimeField = (events) => {\n    //const { user } = UserAuth()\n    for (let i = 0; i < events.length; i++) {\n      let title = events[i]['title']\n      let id = events[i]['id']\n      let start = new Date(events[i]['start']['seconds'] * 1000)\n      let end = new Date(events[i]['end']['seconds'] * 1000)\n  \n      let newEvent = {\n        title: title,\n        start: start,\n        end: end,\n        uid: user.uid\n      }\n      events[i] = newEvent\n    }\n    return events\n  }\n\n  useEffect((e) => {\n    let active = true\n    if (active == true && user.uid != null) {\n      const q = query(collection(db, \"calendar\"), where (\"uid\", \"==\", user.uid))\n      console.log(\"Retrieving events\")\n      const getAllTasks = onSnapshot(q, (querySnapshot) => {\n      let currentEvents = []\n      querySnapshot.forEach((doc) => {\n        currentEvents.push({ ...doc.data(), id: doc.id})\n      })\n      setEvent(() => normalizeDateTimeField(currentEvents))\n\n    })\n    return () => {active = false}}\n  },[user.uid])\n\n  return (\n    <div className=\"todo-list-main\">\n      <Header />\n      <Title name={\"Task Tracker\"}/>\n      <div className=\"todo-list-calender\">\n        <div className=\"todo-list-container\">\n          <AddTodo />\n            {currentTasks.map((todo) => (\n              <Todoitem \n                item={todo}\n              />\n            ))}\n        </div>\n        <div className=\"calendar-container\">\n          <CalendarScheduler />\n        </div>\n        </div>\n      </div>\n  )\n}\n\nexport default Todolist\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}