{"ast":null,"code":"import _slicedToArray from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Forum/CollaborativeCanvas.js\";\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { rangeContainsMarker } from '@fullcalendar/react';\nimport { db } from \"../../firebase\";\nimport { collection, query, doc, setDoc, addDoc, updateDoc, serverTimestamp, onSnapshot } from \"firebase/firestore\";\nimport { UserAuth } from '../../context/AuthContext';\nimport { NavLink } from 'react-router-dom';\nimport Title from '../Title/Title.js';\nimport './CollaborativeCanvas.css';\n\nvar CollaborativeCanvas = function CollaborativeCanvas() {\n  var _UserAuth = UserAuth(),\n      user = _UserAuth.user;\n\n  var keys = _toConsumableArray(Array(2500).keys());\n\n  var values = Array(2500).fill(\"white\");\n  var arr = {};\n  keys.forEach(function (key) {\n    return arr[key] = values[key];\n  });\n\n  var _useState = useState(\"black\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentColour = _useState2[0],\n      setCurrentColour = _useState2[1];\n\n  var _useState3 = useState(arr),\n      _useState4 = _slicedToArray(_useState3, 2),\n      canvasColour = _useState4[0],\n      setCanvasColour = _useState4[1];\n\n  var toggleColour = function toggleColour(e) {\n    setCurrentColour(function () {\n      return e.target.value;\n    });\n  };\n\n  var start = false;\n\n  var _useState5 = useState(5000),\n      _useState6 = _slicedToArray(_useState5, 2),\n      timerClock = _useState6[0],\n      setTimerClock = _useState6[1];\n\n  if (start == true) {\n    useEffect(function () {\n      var timer = setTimeout(function () {\n        console.log(\"minus: \", timerClock);\n        setTimerClock(function () {\n          return timerClock - 1;\n        });\n      }, 1000);\n      return function () {\n        clearTimeout(timer);\n      };\n    }, [timerClock]);\n  }\n\n  useEffect(function () {\n    var active = true;\n    var q = query(collection(db, \"canvas\"));\n    console.log(\"Retrieving comments list\");\n    var getAllComments = onSnapshot(q, function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        console.log(doc.data()['canvas']);\n        setCanvasColour(function () {\n          return doc.data()['canvas'];\n        });\n      });\n    });\n    return function () {\n      active = false;\n    };\n  }, [user.uid]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, timerClock), /*#__PURE__*/React.createElement(Title, {\n    name: \"Collaborative Canvas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"canvas-description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \"Create a collaborative pixel art by placing a block upon completion of each 1 hour study session!\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 22\n    }\n  }), \"Come back 1 hour again to place another block\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"colour-picker-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link-canvas\",\n    to: \"/forum\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"colour-picker-caption\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"Colour Picker: \"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"colour-picker\",\n    type: \"color\",\n    onChange: toggleColour,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"squaregrid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, keys.map(function (index) {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"cell\",\n      onClick: saveCanvas,\n      id: index,\n      style: {\n        backgroundColor: canvasColour[index]\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 38\n      }\n    });\n  })));\n};\n\nexport default CollaborativeCanvas;","map":{"version":3,"names":["React","useState","useEffect","rangeContainsMarker","db","collection","query","doc","setDoc","addDoc","updateDoc","serverTimestamp","onSnapshot","UserAuth","NavLink","Title","CollaborativeCanvas","user","keys","Array","values","fill","arr","forEach","key","currentColour","setCurrentColour","canvasColour","setCanvasColour","toggleColour","e","target","value","start","timerClock","setTimerClock","timer","setTimeout","console","log","clearTimeout","active","q","getAllComments","querySnapshot","data","uid","map","index","saveCanvas","backgroundColor"],"sources":["/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Forum/CollaborativeCanvas.js"],"sourcesContent":["import React from 'react'\n\nimport { useState, useEffect } from 'react'\nimport { rangeContainsMarker } from '@fullcalendar/react'\n\n\nimport { db } from \"../../firebase\"\nimport { collection, \n         query,\n         doc,\n         setDoc, \n         addDoc,\n         updateDoc, \n         serverTimestamp,\n         onSnapshot } from \"firebase/firestore\"\n\nimport { UserAuth } from '../../context/AuthContext'\n\nimport { NavLink } from 'react-router-dom'\n\nimport Title from '../Title/Title.js'\nimport './CollaborativeCanvas.css'\n\nconst CollaborativeCanvas = () => {\n    const {user}  = UserAuth()\n\n    let keys = [...Array(2500).keys()]\n    let values = Array(2500).fill(\"white\")\n    let arr = {}\n    keys.forEach((key) => arr[key] = values[key])\n\n\n    const [currentColour, setCurrentColour] = useState(\"black\")\n    const [canvasColour, setCanvasColour] = useState(arr)\n\n    const toggleColour = (e) => {\n        setCurrentColour(() => e.target.value)\n    }\n    \n    let start = false\n    let [timerClock, setTimerClock] = useState(5000); \n    if (start == true) {\n        useEffect(() => {\n            const timer = setTimeout(() => {\n                console.log(\"minus: \", timerClock)\n                setTimerClock(() => timerClock - 1);\n            }, 1000)\n            return () => { \n               clearTimeout(timer)\n            }\n           }, [timerClock]);\n    }\n   \n\n    useEffect(() => {\n        let active = true\n          const q = query(collection(db, \"canvas\"))\n          console.log(\"Retrieving comments list\")\n          const getAllComments = onSnapshot(q, (querySnapshot) => {\n            querySnapshot.forEach((doc) => {\n                console.log(doc.data()['canvas'])\n                setCanvasColour(() => doc.data()['canvas'])\n            })\n          })\n          return () => {active = false}\n    }, [user.uid])\n\n\n    return (\n        <div>\n            <p>{timerClock}</p>\n            <Title name={\"Collaborative Canvas\"} />\n            <p className=\"canvas-description\">Create a collaborative pixel art by placing a block upon completion of each 1 hour study session!\n            <br></br><br></br>Come back 1 hour again to place another block</p>\n            <div className=\"colour-picker-container\">\n                <NavLink \n                    className=\"nav-link-canvas\"\n                    to='/forum'>Back\n                </NavLink>\n                <p className=\"colour-picker-caption\">Colour Picker: </p>\n                <input\n                    className=\"colour-picker\"\n                    type='color'\n                    onChange={toggleColour}\n                />\n            </div>\n            <div class=\"squaregrid\">\n                {keys.map((index) => <button className={\"cell\"} onClick={saveCanvas} \n                id={index} style={{backgroundColor: canvasColour[index]}}/>)}\n            </div>\n        </div>\n      \n        \n    )\n}\n\nexport default CollaborativeCanvas;\n\n\n\n            "],"mappings":"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"},"metadata":{},"sourceType":"module"}