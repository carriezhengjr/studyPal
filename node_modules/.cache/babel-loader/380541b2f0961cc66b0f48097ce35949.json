{"ast":null,"code":"import _objectSpread from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/TaskTracker/CalendarScheduler.js\";\n\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { db } from \"../../firebase\";\nimport { doc, addDoc, collection, query, onSnapshot, deleteDoc, where, setDoc } from \"firebase/firestore\";\nimport { UserAuth } from '../../context/AuthContext';\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport moment from \"moment\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport Title from '../Title/Title.js';\nimport './CalendarScheduler.css';\nvar localizer = momentLocalizer(moment);\n\nvar CalendarScheduler = function CalendarScheduler(props) {\n  var _UserAuth = UserAuth(),\n      user = _UserAuth.user;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      events = _useState2[0],\n      setEvent = _useState2[1];\n\n  var normalizeDateTimeField = function normalizeDateTimeField(events) {\n    //const { user } = UserAuth()\n    for (var i = 0; i < events.length; i++) {\n      var title = events[i]['title'];\n      var id = events[i]['id'];\n      var start = new Date(events[i]['start']['seconds'] * 1000);\n      var end = new Date(events[i]['end']['seconds'] * 1000);\n      var newEvent = {\n        title: title,\n        start: start,\n        end: end,\n        uid: user.uid\n      };\n      events[i] = newEvent;\n    }\n\n    return events;\n  };\n\n  useEffect(function (e) {\n    var active = true;\n\n    if (active == true && user.uid != null) {\n      var q = query(collection(db, \"calendar\"), where(\"uid\", \"==\", user.uid));\n      console.log(\"Retrieving events\");\n      var getAllTasks = onSnapshot(q, function (querySnapshot) {\n        var currentEvents = [];\n        querySnapshot.forEach(function (doc) {\n          currentEvents.push(_objectSpread({}, doc.data(), {\n            id: doc.id\n          }));\n        });\n        setEvent(function () {\n          return normalizeDateTimeField(currentEvents);\n        });\n      });\n      return function () {\n        active = false;\n      };\n    }\n  }, [user.uid]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Calendar, {\n    defaultDate: moment().toDate(),\n    defaultView: \"month\",\n    views: ['month', 'week'],\n    localizer: localizer,\n    events: events,\n    selectable: true,\n    onSelectSlot: createNewEvent,\n    onSelectEvent: deleteCurrentEvent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default CalendarScheduler;","map":{"version":3,"names":["React","useEffect","useState","db","doc","addDoc","collection","query","onSnapshot","deleteDoc","where","setDoc","UserAuth","Calendar","momentLocalizer","moment","Title","localizer","CalendarScheduler","props","user","events","setEvent","normalizeDateTimeField","i","length","title","id","start","Date","end","newEvent","uid","e","active","q","console","log","getAllTasks","querySnapshot","currentEvents","forEach","push","data","toDate","createNewEvent","deleteCurrentEvent"],"sources":["/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/TaskTracker/CalendarScheduler.js"],"sourcesContent":["import React from 'react'\nimport { useEffect, useState } from 'react'\n\nimport { db } from \"../../firebase\"\nimport {  doc, \n          addDoc, \n          collection, \n          query, \n          onSnapshot,\n          deleteDoc,\n          where,\n          setDoc\n        } from \"firebase/firestore\"; \n\nimport { UserAuth } from '../../context/AuthContext'\n\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport moment from \"moment\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport Title from '../Title/Title.js'\n\nimport './CalendarScheduler.css'\n\n\nconst localizer = momentLocalizer(moment);\n\n\nconst CalendarScheduler = (props) => {\n  \n  const {user}  = UserAuth()\n  const[events, setEvent] = useState([])\n\n  const normalizeDateTimeField = (events) => {\n    //const { user } = UserAuth()\n    for (let i = 0; i < events.length; i++) {\n      let title = events[i]['title']\n      let id = events[i]['id']\n      let start = new Date(events[i]['start']['seconds'] * 1000)\n      let end = new Date(events[i]['end']['seconds'] * 1000)\n  \n      let newEvent = {\n        title: title,\n        start: start,\n        end: end,\n        uid: user.uid\n      }\n      events[i] = newEvent\n    }\n    return events\n  }\n\n  useEffect((e) => {\n    let active = true\n    if (active == true && user.uid != null) {\n      const q = query(collection(db, \"calendar\"), where (\"uid\", \"==\", user.uid))\n      console.log(\"Retrieving events\")\n      const getAllTasks = onSnapshot(q, (querySnapshot) => {\n      let currentEvents = []\n      querySnapshot.forEach((doc) => {\n        currentEvents.push({ ...doc.data(), id: doc.id})\n      })\n      setEvent(() => normalizeDateTimeField(currentEvents))\n    })\n    return () => {active = false}}\n  },[user.uid])\n\n  return (\n      <div className=\"App\"> \n      <Calendar\n        defaultDate={moment().toDate()}\n        defaultView=\"month\"\n        views={['month','week']}\n        localizer={localizer}\n        events={events}\n        selectable\n        onSelectSlot={createNewEvent}\n        onSelectEvent={deleteCurrentEvent}\n      />   \n      </div>\n    );\n}\n\nexport default CalendarScheduler\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}