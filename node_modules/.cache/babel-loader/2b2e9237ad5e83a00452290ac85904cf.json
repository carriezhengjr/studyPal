{"ast":null,"code":"import _objectSpread from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/ongyongen/Desktop/studyPal-local/studyPal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Calendar/CalendarTemplate.js\";\n\nimport React from 'react';\nimport { useEffect, useState, useCallback } from 'react';\nimport { db } from \"../../firebase\";\nimport { async } from \"@firebase/util\";\nimport { doc, setDoc, addDoc, collection, query, where, getDocs, onSnapshot, deleteDoc, updateDoc, QuerySnapshot, orderBy } from \"firebase/firestore\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport moment from \"moment\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport './Cal.css';\nimport Title from '../Title.js';\nimport CalendarScheduler from './CalendarScheduler.js';\nimport Test from './Test.js';\nvar localizer = momentLocalizer(moment);\n\nvar CalendarTemplate = function CalendarTemplate() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentEvents = _useState2[0],\n      setCurrentEvents = _useState2[1];\n\n  var setNewEvent = function setNewEvent(e) {\n    setCurrentEvents(function () {\n      return e;\n    });\n  };\n\n  useEffect(function () {\n    var active = true;\n\n    if (active == true) {\n      var q = query(collection(db, \"calendar\"));\n      var getAllTasks = onSnapshot(q, function (querySnapshot) {\n        var events = [];\n        querySnapshot.forEach(function (doc) {\n          events.push(_objectSpread({}, doc.data(), {\n            id: doc.id\n          }));\n        });\n        setCurrentEvents(function () {\n          return events;\n        });\n        console.log(currentEvents);\n      });\n    }\n\n    return function () {\n      active = false;\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Calendar, {\n    defaultDate: moment().toDate(),\n    defaultView: \"month\",\n    views: ['month', 'week'],\n    localizer: localizer,\n    events: currentEvents,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default CalendarTemplate;\n/*\n\n\n    const createNewEvent = async (e) => {\n        let confirmEventTitle = window.prompt(\"Create a new event\")\n        if (confirmEventTitle) {\n        let newEvent = {\n            start : e.start,\n            end: e.end,\n            title: confirmEventTitle\n        }\n        let newEvents = [...currentEvents, newEvent]\n        setCurrentEvents(() => newEvents)\n        await addDoc(collection(db, \"calendar\"), newEvent)\n        }\n    }\n\n    const handleDelete = async (id) => {\n        await deleteDoc(doc(db, \"todos\", id))\n    }\n\n    const deleteCurrentEvent = (e) => {\n        let confirmDeleteEvent = window.confirm(\"Delete this event?\")\n        if (confirmDeleteEvent) {\n        let newEvents = currentEvents.filter((event) => event.title != e.title)\n        setCurrentEvents(() => newEvents)\n        }\n    }\n\n*/","map":{"version":3,"names":["React","useEffect","useState","useCallback","db","async","doc","setDoc","addDoc","collection","query","where","getDocs","onSnapshot","deleteDoc","updateDoc","QuerySnapshot","orderBy","Calendar","momentLocalizer","moment","FullCalendar","Title","CalendarScheduler","Test","localizer","CalendarTemplate","currentEvents","setCurrentEvents","setNewEvent","e","active","q","getAllTasks","querySnapshot","events","forEach","push","data","id","console","log","toDate"],"sources":["/Users/ongyongen/Desktop/studyPal-local/studyPal/src/components/Calendar/CalendarTemplate.js"],"sourcesContent":["import React from 'react'\nimport { useEffect, useState, useCallback } from 'react'\n\nimport { db } from \"../../firebase\"\nimport { async } from \"@firebase/util\"\nimport {  doc, \n          setDoc, \n          addDoc, \n          collection, \n          query, \n          where,\n          getDocs, \n          onSnapshot,\n          deleteDoc,\n          updateDoc,\n          QuerySnapshot,\n          orderBy  } from \"firebase/firestore\"; \n\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport moment from \"moment\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport './Cal.css'\n\nimport Title from '../Title.js'\nimport CalendarScheduler from './CalendarScheduler.js';\nimport Test from './Test.js';\n\nconst localizer = momentLocalizer(moment);\n\n\nconst CalendarTemplate = () => {\n    const [currentEvents, setCurrentEvents] = useState([])\n\n    const setNewEvent = (e) => {\n        setCurrentEvents(() => e)\n    }\n    \n    \n    useEffect(() => {\n        let active = true\n        if (active == true) {\n            const q = query(collection(db, \"calendar\"))\n            const getAllTasks = onSnapshot(q, (querySnapshot) => {\n            let events = []\n            querySnapshot.forEach((doc) => {\n                events.push({...doc.data(), id:doc.id})\n            })\n            setCurrentEvents(() => events)\n            console.log(currentEvents)\n        })}\n        return () => {active = false}\n    },[])\n\n    return (\n        <div className=\"App\"> \n        <Calendar\n            defaultDate={moment().toDate()}\n            defaultView=\"month\"\n            views={['month','week']}\n            localizer={localizer}\n            events={currentEvents}\n        />   \n        </div>\n        );\n    }\n\nexport default CalendarTemplate\n\n\n/*\n\n\n    const createNewEvent = async (e) => {\n        let confirmEventTitle = window.prompt(\"Create a new event\")\n        if (confirmEventTitle) {\n        let newEvent = {\n            start : e.start,\n            end: e.end,\n            title: confirmEventTitle\n        }\n        let newEvents = [...currentEvents, newEvent]\n        setCurrentEvents(() => newEvents)\n        await addDoc(collection(db, \"calendar\"), newEvent)\n        }\n    }\n\n    const handleDelete = async (id) => {\n        await deleteDoc(doc(db, \"todos\", id))\n    }\n\n    const deleteCurrentEvent = (e) => {\n        let confirmDeleteEvent = window.confirm(\"Delete this event?\")\n        if (confirmDeleteEvent) {\n        let newEvents = currentEvents.filter((event) => event.title != e.title)\n        setCurrentEvents(() => newEvents)\n        }\n    }\n\n*/"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,WAA9B,QAAiD,OAAjD;AAEA,SAASC,EAAT,QAAmB,gBAAnB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAAUC,GAAV,EACUC,MADV,EAEUC,MAFV,EAGUC,UAHV,EAIUC,KAJV,EAKUC,KALV,EAMUC,OANV,EAOUC,UAPV,EAQUC,SARV,EASUC,SATV,EAUUC,aAVV,EAWUC,OAXV,QAW0B,oBAX1B;AAaA,SAASC,QAAT,EAAmBC,eAAnB,QAA0C,oBAA1C;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAO,mDAAP;AACA,OAAO,WAAP;AAEA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,iBAAP,MAA8B,wBAA9B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAEA,IAAMC,SAAS,GAAGN,eAAe,CAACC,MAAD,CAAjC;;AAGA,IAAMM,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;EAAA,gBACexB,QAAQ,CAAC,EAAD,CADvB;EAAA;EAAA,IACpByB,aADoB;EAAA,IACLC,gBADK;;EAG3B,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAO;IACvBF,gBAAgB,CAAC;MAAA,OAAME,CAAN;IAAA,CAAD,CAAhB;EACH,CAFD;;EAKA7B,SAAS,CAAC,YAAM;IACZ,IAAI8B,MAAM,GAAG,IAAb;;IACA,IAAIA,MAAM,IAAI,IAAd,EAAoB;MAChB,IAAMC,CAAC,GAAGtB,KAAK,CAACD,UAAU,CAACL,EAAD,EAAK,UAAL,CAAX,CAAf;MACA,IAAM6B,WAAW,GAAGpB,UAAU,CAACmB,CAAD,EAAI,UAACE,aAAD,EAAmB;QACrD,IAAIC,MAAM,GAAG,EAAb;QACAD,aAAa,CAACE,OAAd,CAAsB,UAAC9B,GAAD,EAAS;UAC3B6B,MAAM,CAACE,IAAP,mBAAgB/B,GAAG,CAACgC,IAAJ,EAAhB;YAA4BC,EAAE,EAACjC,GAAG,CAACiC;UAAnC;QACH,CAFD;QAGAX,gBAAgB,CAAC;UAAA,OAAMO,MAAN;QAAA,CAAD,CAAhB;QACAK,OAAO,CAACC,GAAR,CAAYd,aAAZ;MACH,CAPiC,CAA9B;IAOD;;IACH,OAAO,YAAM;MAACI,MAAM,GAAG,KAAT;IAAe,CAA7B;EACH,CAbQ,EAaP,EAbO,CAAT;EAeA,oBACI;IAAK,SAAS,EAAC,KAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA,oBAAC,QAAD;IACI,WAAW,EAAEX,MAAM,GAAGsB,MAAT,EADjB;IAEI,WAAW,EAAC,OAFhB;IAGI,KAAK,EAAE,CAAC,OAAD,EAAS,MAAT,CAHX;IAII,SAAS,EAAEjB,SAJf;IAKI,MAAM,EAAEE,aALZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADA,CADJ;AAWC,CAlCL;;AAoCA,eAAeD,gBAAf;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}